<UserControl x:Class="ccc.Controls.Player.AdvancedPlayerController"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="150" d:DesignWidth="1280"
             ClipToBounds="False">
             
    <UserControl.Resources>
        <Style x:Key="IconButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#94A3B8"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="12">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="#38BDF8"/> <!-- Sky-400 -->
                                <Setter Property="Background" Value="#1E293B"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

         <Style x:Key="OrbButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#0F172A"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="14">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                         <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.1" ScaleY="1.1" CenterX="14" CenterY="14"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    
    <!-- 
         The controller strip is visually 102px tall, but we allow content (The Orb) 
         to spill over the boundaries using ClipToBounds=False.
         We vertically center the items relative to the 102px height.
    -->
    <Grid Height="102" VerticalAlignment="Top" ClipToBounds="False">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/> <!-- Orb Center -->
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- =========================================================
             LEFT: PLAYLIST MENU (340x102)
             ========================================================= -->
        <Border Grid.Column="0" 
                Width="340" Height="102"
                HorizontalAlignment="Right"
                Margin="0,0,20,0"
                Background="{StaticResource GlassCardBrush}" 
                BorderBrush="{StaticResource BorderBrush}" BorderThickness="2"
                CornerRadius="16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>   <!-- Title Area -->
                    <RowDefinition Height="36"/>  <!-- Bottom Bar -->
                </Grid.RowDefinitions>

                <!-- 1. Title Area -->
                <StackPanel Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="PLAYLIST TITLE" 
                               Foreground="{StaticResource TextPrimaryBrush}"
                               FontWeight="Black"
                               FontSize="16"
                               TextAlignment="Center"
                               TextTrimming="CharacterEllipsis"/>
                    <!-- Optional Folder Badge Placeholder -->
                    <Border Background="{StaticResource BgTertiaryBrush}" CornerRadius="4" Padding="6,2" HorizontalAlignment="Center" Margin="0,4,0,0">
                         <TextBlock Text="FOLDER NAME" Foreground="{StaticResource TextSecondaryBrush}" FontSize="9" FontWeight="Bold"/>
                    </Border>
                </StackPanel>

                <!-- 2. Bottom Bar -->
                <Border Grid.Row="1" 
                        Background="{StaticResource BgPrimaryBrush}" 
                        BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0"
                        CornerRadius="0,0,16,16"
                        Padding="12,0">
                    <Grid>
                        <!-- Metadata (Left) -->
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                            <TextBlock Text="AUTHOR" Foreground="{StaticResource AccentPrimaryBrush}" Opacity="0.8" FontSize="10" FontWeight="Bold"/>
                            <TextBlock Text=" | " Foreground="{StaticResource TextMutedBrush}" FontSize="10"/>
                            <TextBlock Text="1.2M" Foreground="{StaticResource AccentPrimaryBrush}" Opacity="0.8" FontSize="10" FontWeight="Bold"/>
                        </StackPanel>

                        <!-- Navigation Controls (Right) -->
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
                            <!-- Prev Playlist -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="&lt;"/>
                            <!-- Playlist Grid -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="#"/>
                            <!-- Next Playlist -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="&gt;"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- =========================================================
             CENTER: THE ORB (154x154)
             ========================================================= -->
        <Grid Grid.Column="1" Width="154" Height="154" VerticalAlignment="Top" Margin="0,0,0,0">
             <!-- Orb Glow/Shadow -->
             <Ellipse Fill="#00000000" Stroke="{StaticResource AccentPrimaryBrush}" StrokeThickness="0" Width="154" Height="154">
                <Ellipse.Effect>
                    <DropShadowEffect Color="{StaticResource AccentPrimaryColor}" BlurRadius="40" ShadowDepth="0" Opacity="0.3"/>
                </Ellipse.Effect>
             </Ellipse>

             <!-- Main Orb Circle -->
             <Ellipse Width="154" Height="154" Fill="{StaticResource BgPrimaryBrush}" Stroke="{StaticResource AccentPrimaryBrush}" StrokeThickness="2">
             </Ellipse>
             
             <!-- Image Placeholder -->
             <Ellipse Width="150" Height="150" Fill="{StaticResource BgSecondaryBrush}" Margin="2"/>
             <TextBlock Text="ORB" Foreground="{StaticResource AccentPrimaryBrush}" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Center"/>

             <!-- Orb Radial Buttons (Visual Only - Positioned manually for now) -->
             <!-- 12 o'clock - Upload (Top Center) -->
             <Button Width="28" Height="28" Style="{StaticResource OrbButtonStyle}"  VerticalAlignment="Top" Margin="0,10,0,0">
                <TextBlock Text="^" FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Center"/>
             </Button>

             <!-- 3 o'clock - Menu (Right Center) -->
             <Button Width="28" Height="28" Style="{StaticResource OrbButtonStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,10,0">
                <TextBlock Text="M" FontSize="10" VerticalAlignment="Center" HorizontalAlignment="Center"/>
             </Button>
             
             <!-- 9 o'clock - Search (Left Center) -->
             <Button Width="28" Height="28" Style="{StaticResource OrbButtonStyle}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0">
                <TextBlock Text="?" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
             </Button>
             
             <!-- 6 o'clock - Clipping (Bottom Center) -->
             <Button Width="28" Height="28" Style="{StaticResource OrbButtonStyle}" VerticalAlignment="Bottom" Margin="0,0,0,10">
                <TextBlock Text="O" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center"/>
             </Button>

        </Grid>

        <!-- =========================================================
             RIGHT: VIDEO MENU (340x102)
             ========================================================= -->
        <Border Grid.Column="2" 
                Width="340" Height="102"
                HorizontalAlignment="Left"
                Margin="20,0,0,0"
                Background="{StaticResource GlassCardBrush}" 
                BorderBrush="{StaticResource BorderBrush}" BorderThickness="2"
                CornerRadius="16">
            <Grid>
                 <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>   <!-- Title Area -->
                    <RowDefinition Height="36"/>  <!-- Bottom Bar -->
                </Grid.RowDefinitions>

                <!-- 1. Title Area -->
                 <StackPanel Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="VIDEO TITLE" 
                               Foreground="{StaticResource TextPrimaryBrush}"
                               FontWeight="Black"
                               FontSize="16"
                               TextAlignment="Center"
                               TextTrimming="CharacterEllipsis"/>
                </StackPanel>

                <!-- 2. Bottom Bar -->
                <Border Grid.Row="1" 
                        Background="{StaticResource BgPrimaryBrush}" 
                        BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0"
                        CornerRadius="0,0,16,16"
                        Padding="8,0"> <!-- Tighter padding for more buttons -->
                    <Grid>
                        <!-- Nav Controls (Far Left) -->
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                              <!-- Prev Video -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="&lt;"/>
                             <!-- Video Grid -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="#"/>
                             <!-- Next Video -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="&gt;"/>
                             <!-- Play/Folder Cycle -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="â–¶"/>
                        </StackPanel>
                        
                        <!-- Tool Controls (Center/Right) -->
                         <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
                             <!-- Shuffle -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="S"/>
                             <!-- Star -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="*"/>
                             <!-- Pin (Priority) -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="P"/>
                             <!-- Like -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="L"/>
                             <!-- More -->
                            <Button Style="{StaticResource IconButtonStyle}" Width="24" Height="24" Content="..."/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>



    </Grid>
</UserControl>
