<UserControl x:Class="ccc.Controls.Cards.VideoCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ccc.Controls.Cards"
             mc:Ignorable="d" 
             d:DesignHeight="260" d:DesignWidth="320">
    
    <Border x:Name="ContainerBorder" Style="{StaticResource CardBaseStyle}" Padding="0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/> <!-- Thumbnail (Aspect Ratio handled by Image or Width) -->
                <RowDefinition Height="*"/>    <!-- Content -->
            </Grid.RowDefinitions>

            <!-- Thumbnail Area -->
            <local:CardThumbnail Grid.Row="0" Height="180"
                                 Source="{Binding ThumbnailUrl}"
                                 Progress="{Binding ProgressPercentage}"
                                 HasProgress="{Binding HasProgress}"
                                 IsPlaying="{Binding IsPlaying}"
                                 IsWatched="{Binding IsWatched}"
                                 CornerRadius="12,12,0,0"/>

            <!-- Content Area -->
            <StackPanel Grid.Row="1" Margin="12,8">
                <!-- Title -->
                <TextBlock Text="{Binding Title}" 
                           FontSize="14" FontWeight="SemiBold"
                           TextTrimming="CharacterEllipsis" 
                           MaxHeight="40" TextWrapping="Wrap"/>
                
                <!-- Subtitle / ID -->
                <TextBlock Text="{Binding VideoId}" 
                           FontSize="11" Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,4,0,0"
                           Visibility="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            </StackPanel>

            <!-- Controls (Pin / Star / Menu) -->
            <!-- Note: In React, these are absolute positioned over the thumbnail or bottom.
                 We can replicate that using a Grid overlap or Canvas on Top. -->
             <Grid Grid.Row="0" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="8"
                   Visibility="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}">
                 <StackPanel Orientation="Horizontal">
                     <!-- Pin Button placeholder -->
                     <Button Style="{StaticResource InvisibleBtn}" Width="24" Height="24" Margin="0,0,4,0">
                         <TextBlock Text="ðŸ“Œ" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                     </Button>
                     <!-- Star Button placeholder -->
                     <Button Style="{StaticResource InvisibleBtn}" Width="24" Height="24">
                         <TextBlock Text="â­" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                     </Button>
                 </StackPanel>
             </Grid>

             <!-- Menu Button (Bottom Right of Thumbnail?) Or Content? 
                  ui.md: "Bottom Right: 3-dot menu appears" (Hover Overlay) -->
             <Grid Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="8"
                   Visibility="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}">
                 <Button Style="{StaticResource InvisibleBtn}" Width="24" Height="24">
                     <TextBlock Text="â‹®" FontSize="16" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White"/>
                 </Button>
             </Grid>

        </Grid>
    </Border>
</UserControl>
